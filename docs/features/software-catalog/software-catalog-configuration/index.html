<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Catalog Configuration · Backstage</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Documentation on Software Catalog Configuration"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Catalog Configuration · Backstage"/><meta property="og:type" content="website"/><meta property="og:url" content="https://backstage.io/"/><meta property="og:description" content="Documentation on Software Catalog Configuration"/><meta property="og:image" content="https://backstage.io/logo_assets/png/Backstage_Identity_Assets_Artwork_RGB_04_Icon_Teal.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://backstage.io/logo_assets/png/Backstage_Identity_Assets_Artwork_RGB_04_Icon_Teal.png"/><link rel="shortcut icon" href="/img/favicon.svg"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css"/><link rel="alternate" type="application/atom+xml" href="https://backstage.io/blog/atom.xml" title="Backstage Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://backstage.io/blog/feed.xml" title="Backstage Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-163836834-5', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Backstage</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://github.com/spotify/backstage" target="_self">GitHub</a></li><li class=""><a href="/docs/overview/what-is-backstage" target="_self">Docs</a></li><li class=""><a href="/plugins" target="_self">Plugins</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="/demos" target="_self">Demos</a></li><li class=""><a href="https://mailchi.mp/spotify/backstage-community" target="_self">Newsletter</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/spotify/backstage/edit/master/docs/features/software-catalog/configuration.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Catalog Configuration</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="processors"></a><a href="#processors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Processors</h2>
<p>The catalog makes use of so called processors to perform all kinds of ingestion
tasks, such as reading raw entity data from a remote source, parsing it,
transforming it, and validating it. These processors are configured under the
<code>catalog.processors</code> key.</p>
<h3><a class="anchor" aria-hidden="true" id="processor-github"></a><a href="#processor-github" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Processor: github</h3>
<p>The <code>github</code> processor is responsible for fetching entity data from files on
GitHub or GitHub Enterprise. The configuration for this processor lives under
<code>catalog.processors.github</code>. Example:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">catalog:</span>
  <span class="hljs-attr">processors:</span>
    <span class="hljs-attr">github:</span>
      <span class="hljs-attr">providers:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">https://github.com</span>
          <span class="hljs-attr">token:</span>
            <span class="hljs-string">$secret:</span>
              <span class="hljs-attr">env:</span> <span class="hljs-string">GITHUB_PRIVATE_TOKEN</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">https://ghe.example.net</span>
          <span class="hljs-attr">apiBaseUrl:</span> <span class="hljs-string">https://ghe.example.net/api/v3</span>
          <span class="hljs-attr">rawBaseUrl:</span> <span class="hljs-string">https://ghe.example.net/raw</span>
          <span class="hljs-attr">token:</span>
            <span class="hljs-string">$secret:</span>
              <span class="hljs-attr">env:</span> <span class="hljs-string">GHE_PRIVATE_TOKEN</span>
</code></pre>
<p>The main subkey is <code>providers</code>, where you can list the various GitHub compatible
providers you want to be able to fetch data from. Each entry is a structure with
up to four elements:</p>
<ul>
<li><code>target</code> (required): The string prefix of the location target that you want to
match on, with no trailing slash. For GitHub, it should be exactly
<code>https://github.com</code>.</li>
<li><code>token</code> (optional): An authentication token as expected by GitHub. If
supplied, it will be passed along with all calls to this provider, both API
and raw. If it is not supplied, anonymous access will be used.</li>
<li><code>apiBaseUrl</code> (optional): If you want to communicate using the APIv3 method
with this provider, specify the base URL for its endpoint here, with no
trailing slash. Specifically when the target is github, you can leave it out
to be inferred automatically. For a GitHub Enterprise installation, it is
commonly at <code>https://api.&lt;host&gt;</code> or <code>https://&lt;host&gt;/api/v3</code>.</li>
<li><code>rawBaseUrl</code> (optional): If you want to communicate using the raw HTTP method
with this provider, specify the base URL for its endpoint here, with no
trailing slash. Specifically when the target is public GitHub, you can leave
it out to be inferred automatically. For a GitHub Enterprise installation, it
is commonly at <code>https://api.&lt;host&gt;</code> or <code>https://&lt;host&gt;/api/v3</code>.</li>
</ul>
<p>You need to supply either <code>apiBaseUrl</code> or <code>rawBaseUrl</code> or both (except for
public GitHub, for which we can infer them). The <code>apiBaseUrl</code> will always be
preferred over the other if a <code>token</code> is given, otherwise <code>rawBaseUrl</code> will be
preferred.</p>
<p>If you do not supply a public GitHub provider, one will be added automatically,
silently at startup for convenience. So you only have to list it if you want to
supply a token for it - and if you do, you can also leave out the <code>apiBaseUrl</code>
and <code>rawBaseUrl</code> fields.</p>
<h2><a class="anchor" aria-hidden="true" id="static-location-configuration"></a><a href="#static-location-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Static Location Configuration</h2>
<p>To enable declarative catalog setups, it is possible to add locations to the
catalog via <a href="/docs/conf/">static configuration</a>. Locations are added to
the catalog under the <code>catalog.locations</code> key, for example:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">catalog:</span>
  <span class="hljs-attr">locations:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">github</span>
      <span class="hljs-attr">target:</span> <span class="hljs-string">https://github.com/spotify/backstage/blob/master/packages/catalog-model/examples/artist-lookup-component.yaml</span>
</code></pre>
<p>The locations added through static configuration can not be removed through the
catalog locations API. To remove the locations, you have to remove them from the
configuration.</p>
<h2><a class="anchor" aria-hidden="true" id="catalog-rules"></a><a href="#catalog-rules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Catalog Rules</h2>
<p>By default the catalog will only allow ingestion of entities with the kind
<code>Component</code>, <code>API</code> and <code>Location</code>. In order to allow entities of other kinds to
be added, you need to add rules to the catalog. Rules are added either in a
separate <code>catalog.rules</code> key, or added to statically configured locations.</p>
<p>For example, given the following configuration:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">catalog:</span>
  <span class="hljs-attr">rules:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">allow:</span> <span class="hljs-string">[Component,</span> <span class="hljs-string">API,</span> <span class="hljs-string">Location,</span> <span class="hljs-string">Template]</span>

  <span class="hljs-attr">locations:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">github</span>
      <span class="hljs-attr">target:</span> <span class="hljs-string">https://github.com/org/example/blob/master/org-data.yaml</span>
      <span class="hljs-attr">rules:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">allow:</span> <span class="hljs-string">[Group]</span>
</code></pre>
<p>We are able to add entities of kind <code>Component</code>, <code>API</code>, <code>Location</code>, or
<code>Template</code> from any location, and <code>Group</code> entities from the <code>org-data.yaml</code>,
which will also be read as statically configured location.</p>
<p>Note that if the <code>catalog.rules</code> key is present it will replace the default
value, meaning that you need to add rules for the default kinds if you want
those to still be allowed.</p>
<p>The following configuration will reject any kind of entities from being added to
the catalog:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">catalog:</span>
  <span class="hljs-attr">rules:</span> <span class="hljs-string">[]</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#processors">Processors</a><ul class="toc-headings"><li><a href="#processor-github">Processor: github</a></li></ul></li><li><a href="#static-location-configuration">Static Location Configuration</a></li><li><a href="#catalog-rules">Catalog Rules</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footer-title"><a href="/"><h2 class="footerLogo"></h2></a></div><div><h5>Docs</h5><a href="/docs/overview/what-is-backstage">What is Backstage?</a><a href="/docs/getting-started/">Getting started</a><a href="/docs/features/software-catalog/software-catalog-overview">Service Catalog</a><a href="/docs/plugins/create-a-plugin">Create a Plugin</a><a href="/docs/dls/design">Designing for Backstage</a></div><div><h5>Community</h5><a href="https://discord.gg/MUpMjP2">Support chatroom</a><a href="https://github.com/spotify/backstage/blob/master/CONTRIBUTING.md">Contributing</a><a href="https://mailchi.mp/spotify/backstage-community">Subscribe to our newsletter</a><a href="https://www.cncf.io/sandbox-projects/">CNCF Sandbox</a></div><div><h5>More</h5><a href="https://spotify.github.io/">Open Source @ Spotify</a><a href="https://github.com/spotify/backstage">GitHub</a><a class="github-button" href="https://github.com/spotify/backstage" data-icon="octicon-star" data-count-href="/spotify/backstage/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/SpotifyEng" class="twitter-follow-button">Follow @SpotifyEng</a></div></div></section><a href="https://spotify.github.io/" target="_blank" rel="noreferrer noopener" class="spotifyOpenSource">Made with <span>❤</span> at Spotify</a><p class="copyright">Copyright © 2020 Spotify AB</p></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8d115c9875ba0f4feaee95bab55a1645',
                indexName: 'backstage',
                inputSelector: '#search_input_react'
              });
            </script></body></html>